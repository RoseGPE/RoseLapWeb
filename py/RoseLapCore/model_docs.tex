\documentclass{article}
\usepackage{amsmath}

\usepackage{booktabs}
\usepackage{textcomp}
\usepackage{float}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}

\usepackage{indentfirst}

\addtolength{\topmargin}{-1.00in}
\addtolength{\textheight}{1.5in}


\begin{document}

\title{RoseLap v4: Lap Time and Point Simulation}
\author{Thaddeus Hughes}

\maketitle

\begin{abstract}
RoseGPE is a student design competition team at Rose-Hulman that competes in the Formula SAE competitions, typically at the Lincoln and Michigan events. RoseGPE is driven by students learning and gaining work experience, and does this by aiming to score high at competition. To do this, the team builds a new prototype vehicle every year.

The competition is historically composed of 3/8 'static' events (cost judging, design judging, business case judging) and 5/8 'dynamic' events (acceleration, skidpad, autocross, endurance, and fuel economy)- meaning there are many facets to earning points and doing well.

Lap Time Simulation can be utilized to determine the configuration of vehicle which can produce the most points at competition. Determining points outcome from the acceleration, skipad, autocross, and endurance events is largely straightforward.
\end{abstract}

\section{Problem Introduction}
Lap Time Simulation is a numerical process. The general premise is to apply simplistic physics models to a car traveling over a small, finite stretch of track with given curvature to determine the next vehicle state. By stitching these segments together, with a strategy of when to brake, shift, or otherwise drive the vehicle, the operation of a racecar under idealized conditions can be simulated with useful accuracy.

These simulation results can be useful, potentially, to assist a driver in training for a track. They can also be useful and motivating for an engineer to understand how a vehicle drives around the track in detail, monitoring grip. The real value, however, lies in the ability to vary parameters and see how they impact lap times (and fuel consumption).

These lap times can be used with point formulas and other data to determine the overall point limit of a car at a particular competition.

\section{Pre-Processing and Input Data}
Blah blah dxfs and YAML

\section{Component Models}

\subsection{Tires}

Tire models are extremely complicated if they are to be accurate- but this complexity can be a distraction from the major characteristics of tires that concern us. This behavior is that tires do not have a constant coefficient of friction- it decreases with additional normal force. Alternatively, we can model the tires as having some baseline, or 'offset' grip at zero normal force, and as normal force increases, maximum grip increases linearly.

\begin{align}
	F_{tire,max,lat} = F_{tire,offset,lat} + \mu_{tire,lat} N \\
	F_{tire,max,long} = F_{tire,offset,long} + \mu_{tire,long} N
\end{align}

The parameters here are only for one tire. If we wish to look at the lumped characteristics of multiple tires, we will need to do some simple division, and at the end of it all, multiply by the number of tires.

\begin{align}
	F_{tire,max,lat} = F_{tire,offset,lat} + \mu_{tire,lat} N/n_{tires} \\
	F_{tire,max,long} = F_{tire,offset,long} + \mu_{tire,long} N/n_{tires}
\end{align}

The parameters ($\mu$ and $F_{tire,offset}$) can be found from experimental tire data for various tires. The easiest method is to find lines that meet the outer capabilities of the tires, which will be at optimal operating conditions (camber, toe, slip rate, slip angle, and temperature).

Of course, a racecar tire is rarely purely in one of these conditions- we must determine the limits in a multi-axis loading. At a given normal force, a 'friction ellipse' can be produced that intercepts these limits. This can be written as

\begin{align}
	\frac{F_{tire,lat}^2}{F_{tire,max,lat}^2} + \frac{F_{tire,long}^2}{F_{tire,max,long}^2} = 1
\end{align}

We can solve, then, for the 'remaining' lateral or longitudinal force given the other (this is still for one tire, but the lateral force is for the vehicle as a whole).

\begin{align}
	F_{tire,remaining,long} = F_{tire,max,long} \sqrt{1-(\frac{F_{tire,lateral}}{n_{tires} F_{tire,max,lat}})^2} 
\end{align}

\subsection{Aerodynamics}

Aerodynamic forces on the vehicle obey a square law relationship:

\begin{align}
	F_{down} = \alpha_{down} v^2, \\
	F_{drag} = \alpha_{down} v^2, \\
\end{align}

where $\alpha$'s are scaling constants computed from the aerodynamic forces at 35 miles per hour:

\begin{align}
	\alpha = \frac{F_{35 MPH}}{(35 MPH)^2}
\end{align}

The drag and downforce can be defined for three different aerodynamic 'modes': Full, Drag-Reduced (acceleration), and Airbrake (braking).

\subsection{Powertrain}

The force developed by the powertrain at the tires is modeled as a function of vehicle velocity and current gear.

\begin{align}
	\omega_{crank} = \frac{v}{r_{tire}} N_{final} N_{transmission,i_{gear}}, \\
	F_{long,engine,limit} = T_{engine}(\omega_{crank}) N_{final} N_{transmission,i_{gear}},
\end{align}

Where $N$ is a gear ratio, $i_{gear}$ is the gear number, and $\omega_{crank}$ is the angular velocity of the crankshaft. $T_{engine}$ is a linear interpolation representing the torque curve of the engine. For velocities that cause the engine to hit its 'rev limiter', the engine is modeled as producing zero power. For velocities that are below the lowest datapoint specified in the torque curve, the engine is modeled as producing the torque at the lowest specified RPM.

It takes a finite amount of time, $t_shift$ in order for a shift to occur. During this time, the powertrain produces no power. Another gear is chosen with a different gear than the currently selected one will yield a higher $F_{tire}$. When this happens, the driver shifts in the direction of this gear (the transmission is sequential, not fully manual). When the vehicle brakes, the gear is 'reset', and when the powertrain is used again, the best available gear is used, regardless of what was engaged prior.

\subsection{Driver}

The driver we assume (with some noted exceptions) is one which seeks to follow the ideal that racing is about maximizing acceleration in the correct direction. They use all available tire grip or engine power whenever possible, and brake as late and hard as possible. This driver does not exist in reality, but is a useful model allowing us to push the bounds for what the car can be driven to.

\section{Single-Tire, Point-Mass Model}

The physics behind a racecar are rather complicated. However, they can be simplified with the point mass assumption. This is the assumption that the car acts as a single point where all loads are applied, with no suspension to complicate tire grip and steering or tire characteristics.

Now, we can begin the vehicle physics. The forces in the vertical direction, with no vertical acceleration (I.E. perfectly flat ground) are:

\begin{align}
    -F_{down} -m g + N = m a_{z} = 0, \\
    N = m g + F_{down} \label{eq_z}
\end{align}

where $m$ is the vehicle mass, $g$ is the local acceleration due to gravity, and $N$ is the normal force of the track on the tires.

Given a specific vehicle path, we will prescribe a curvature the vehicle must pass through. The sum of forces in the lateral direction is, then,

\begin{align}
    \Sigma F_{lat} = m a_{lat} \\
    F_{tire,lat} = m v^2 k, \label{eq_lateral}
\end{align}

where $a_{lat}$ is lateral acceleration, $v$ is instantaneous vehicle velocity, and $k$ is curvature.

%By combining Equations \ref{eq_tire} and \ref{eq_lateral}, we can determine that the remaining longitudinal tire grip is:

%\begin{align}  
%    \Sigma F_{lateral} = m a_{lateral} \\
%    F_{tire,long,available} = \sqrt{ (\mu N)^2 - (m v^2 k)^2}, \label{eq_lateral}
%\end{align}
%
%Now, it is evident that we may not have remaining tire grip depending on velocity! As such, we will have to deal with going too fast later on- braking is a task that is not so straightforward.

The longitudinal forces acting on the vehicle are that of the tire and drag:

\begin{align}
    a_{longitudinal} = \frac{\Sigma F_{longitudinal}}{m}\\
    a_{longitudinal} = \frac{F_{long,tire} - F_{drag} }{m} \label{eq_accel}
\end{align}

The force of the tire, though, can vary. In the case of braking, we assume the driver has the ability to lock up the tires, but does not; i.e., the tires apply all remaining grip: 
\begin{align}
F_{long,tire,braking} = -F_{tire,long,remaining}. \label{eq_accel_brake}
\end{align}

Acceleration, though, is more complicated, as the vehicle could be limited by either tire grip or engine power:

\begin{align}
	F_{long,tire,accel} = min(F_{tire,long,remaining}, F_{engine,limit})
\end{align}

\section{Dual-Tire, Point-Mass Model}
2 tirez = more better

\section{Point Simulations}
We plug times into these formulas and bam

\section{Post-Processing}
Blah Blah web and graphs

\section{Future Plans}
Write your conclusion here.

Tire temps would be interesting???

\end{document}
